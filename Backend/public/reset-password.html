<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Reset Password | CABII</title>
</head>
<body>

<h2>Reset Password</h2>

<input type="password" id="newPass" placeholder="New password">
<button id="resetBtn">Reset Password</button>

<script>
const API = cabii-carsandbikesinindia-production.up.railway.app;
const params = new URLSearchParams(window.location.search);
const token = params.get("token");

document.getElementById("resetBtn").onclick = async () => {
  const newPassword = document.getElementById("newPass").value;

  if (!newPassword) {
    alert("Password required");
    return;
  }

  const res = await fetch(API + "/api/auth/reset-password", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ token, newPassword })
  });

  const data = await res.json();

  if (!res.ok) {
    alert(data.message || "Reset failed");
    return;
  }

  alert("âœ… Password reset successful");
  window.location.href = "login.html";
};
</script>

</body>
</html>